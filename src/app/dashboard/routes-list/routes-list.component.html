<div class="routes-list-container">
  <!-- Header con título y botón crear ruta -->
  <div class="flex items-center justify-between mb-6">
    <h1 class="screen-title">{{ 'routes.title' | customTranslate }}</h1>
    <button class="btn-primary" (click)="createRoute()" type="button">
      <span nz-icon nzType="plus" nzTheme="outline" aria-hidden="true"></span>
      {{ 'routes.createRoute' | customTranslate }}
    </button>
  </div>

  <!-- Indicador de carga -->
  <div *ngIf="loading" class="flex justify-center items-center py-12">
    <nz-spin nzSimple [nzSize]="'large'"></nz-spin>
  </div>

  <!-- Mensaje de error -->
  <div *ngIf="error && !loading" class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6">
    <p class="font-medium">{{ error }}</p>
    <button class="mt-2 text-sm underline" (click)="loadRoutes()" type="button" [attr.aria-label]="'routes.retry' | customTranslate">{{ 'routes.retry' | customTranslate }}</button>
  </div>

  <!-- Tabla de rutas con estilos globales -->
  <div *ngIf="!loading && !error && routes.length > 0" class="table-container">
    <table>
      <thead>
        <tr>
          <th scope="col">{{ 'routes.routeId' | customTranslate }}</th>
          <th scope="col">{{ 'routes.creationDate' | customTranslate }}</th>
          <th scope="col">{{ 'routes.originWarehouse' | customTranslate }}</th>
          <th scope="col">{{ 'routes.assignedDeliveries' | customTranslate }}</th>
          <th scope="col">{{ 'routes.status' | customTranslate }}</th>
          <th scope="col">{{ 'routes.assignedTruck' | customTranslate }}</th>
          <th scope="col">{{ 'routes.actions' | customTranslate }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let route of routes">
          <td>
            <p>#{{ route.id }}</p>
          </td>
          <td>
            <p>{{ route.creationDate }}</p>
          </td>
          <td>{{ route.originWarehouse }}</td>
          <td>{{ route.assignedDeliveries }}</td>
          <td>
            <nz-tag [nzColor]="getStatusColor(route.status)" role="status" [attr.aria-label]="getStatusText(route.status)">
              {{ getStatusText(route.status) }}
            </nz-tag>
          </td>
          <td>
            <p>{{ route.assignedTruck }}</p>
          </td>
          <td class="actions-cell">
            <button
              nz-button
              nzType="default"
              type="button"
              (click)="viewRoute(route)"
              class="action-button"
              [attr.aria-label]="('routes.viewDetail' | customTranslate) + ': Ruta #' + route.id"
              [nzTooltipTitle]="'routes.viewDetail' | customTranslate">
              <span class="action-icon">
                <span nz-icon nzType="eye" nzTheme="outline" aria-hidden="true"></span>
              </span>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State - Sin rutas -->
  <div *ngIf="!loading && !error && routes.length === 0" class="empty-state">
    <div class="empty-state-content">
      <span nz-icon nzType="environment" nzTheme="outline" class="empty-icon" aria-hidden="true"></span>
      <h2 class="empty-title">{{ 'routes.noRoutes' | customTranslate }}</h2>
      <p class="empty-description">
        {{ 'routes.noRoutesDescription' | customTranslate }}
      </p>
    </div>
  </div>

  <!-- Paginador -->
  <div *ngIf="routes.length > 0" class="flex justify-center mt-6">
    <nz-pagination [(nzPageIndex)]="currentPage" [nzTotal]="totalItems" [nzPageSize]="pageSize"
      [nzShowSizeChanger]="false" [nzShowQuickJumper]="false">
    </nz-pagination>
  </div>
</div>